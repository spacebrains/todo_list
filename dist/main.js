!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t){void 0===t&&(t=""),this.task=t,this.id=Math.random(),this.finished=!1}}();e.default=o},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){void 0===e&&(e="");var o=t.call(this)||this;return o.task=e,o.finalTime=new Date(n),o.isFinish(),console.log(n),o}return i(e,t),e.prototype.isFinish=function(){new Date>this.finalTime&&(this.finished=!0)},e}(r(n(0)).default);e.default=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(0)),s=function(t){function e(e){void 0===e&&(e="");var n=t.call(this)||this;return n.task=e,n.subTasks=[],n}return i(e,t),e.prototype.addSubTask=function(t){var e=new a.default(t);return this.subTasks.push(e),e},e.prototype.remove=function(t){this.subTasks=this.subTasks.filter(function(e){return e.id!==+t})},e.prototype.deleteFinished=function(){this.subTasks=this.subTasks.filter(function(t){return!t.finished})},e.prototype.finishById=function(t){this.subTasks=this.subTasks.map(function(e){return+e.id==+t&&(e.finished=!e.finished),e}),this.allFinished()},e.prototype.allFinished=function(){this.finished=this.subTasks.every(function(t){return t.finished})},e.prototype.search=function(t){return this.subTasks.filter(function(e){return e.task.toLowerCase().indexOf(t.toLowerCase())+1})},e}(a.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=new(o(n(4)).default);console.log(i)},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(5)),r=o(n(1)),a=o(n(2)),s=o(n(0)),d=function(){function t(){this.TodoApp=new i.default,this.todos=this.TodoApp.todos,this.render()}return t.prototype.render=function(){this.search(),this.drawTodos(),this.drawForms(),this.deleteFinished()},t.prototype.search=function(){var t=this,e=document.getElementById("search"),n=document.querySelector("#search input"),o=document.querySelector("#search span");e.onsubmit=function(e){e.preventDefault(),t.todos=t.TodoApp.todos,t.todos=t.TodoApp.search(n.value),t.drawTodos()},o.onclick=function(){t.todos=t.TodoApp.todos,n.value="",t.drawTodos()}},t.prototype.drawTask=function(t){var e=this,n=document.createElement("li"),o=document.createElement("div"),i=document.createElement("span"),r=document.createElement("button");return t.finished?i.className="finished":i.className="notFinished",i.innerText=t.task,r.innerText="x",n.dataset.id=t.id,o.appendChild(i),o.appendChild(r),n.appendChild(o),r.onclick=function(t){t.preventDefault();var n=t.target.parentNode.parentNode.dataset.id;e.TodoApp.remove(n),e.TodoApp.save(),e.todos=e.TodoApp.todos,e.drawTodos()},i.onclick=function(t){var n=t.target.parentNode.parentNode.dataset.id;e.TodoApp.finishById(n),e.TodoApp.save(),e.todos=e.TodoApp.todos,e.drawTodos()},n},t.prototype.drawTaskWithSubtasks=function(t){var e=this,n=this.drawTask(t),o=document.createElement("ul");t.subTasks.forEach(function(t){var n=e.drawTask(t);o.appendChild(n)});var i=document.createElement("div"),r=document.createElement("button");return r.innerText="+",i.appendChild(r),r.onclick=function(t){var n=t.target.parentNode.parentNode.dataset.id;i.innerHTML="",i.appendChild(e.drawFormForSubTask(n))},n.appendChild(o),n.appendChild(i),n},t.prototype.drawFormForSubTask=function(t){var e=this,n=document.createElement("form"),o=document.createElement("input"),i=document.createElement("button");return i.innerText="add",n.appendChild(o),n.appendChild(i),n.onsubmit=function(n){n.preventDefault(),e.TodoApp.addSubTask(t,o.value),e.TodoApp.save(),e.drawTodos()},n},t.prototype.drawTaskWithTimer=function(t){var e=this.drawTask(t),n=document.createElement("span");return n.innerText=Math.round((t.finalTime-Date.now())/36e5)+" hours",e.appendChild(n),e},t.prototype.drawTodos=function(){var t=this,e=document.getElementById("todos");e.innerHTML="",this.todos.forEach(function(n){var o;n instanceof a.default?o=t.drawTaskWithSubtasks(n):n instanceof r.default?o=t.drawTaskWithTimer(n):n instanceof s.default&&(o=t.drawTask(n)),e.appendChild(o)})},t.prototype.drawFormForTask=function(){var t=this,e=document.createElement("form"),n=document.createElement("input"),o=document.createElement("button");return o.innerText="add",e.appendChild(n),e.appendChild(o),e.onsubmit=function(e){e.preventDefault(),t.TodoApp.addTask(n.value),t.TodoApp.save(),t.drawTodos()},e},t.prototype.drawFormForTaskWithSubTasks=function(){var t=this,e=document.createElement("form"),n=document.createElement("input"),o=document.createElement("button");return o.innerText="add",e.appendChild(n),e.appendChild(o),e.onsubmit=function(e){e.preventDefault(),t.TodoApp.addTaskWithSubTasks(n.value),t.TodoApp.save(),t.drawTodos()},e},t.prototype.drawFormForTaskWithTimer=function(){var t=this,e=document.createElement("form"),n=document.createElement("input");n.type="text";var o=document.createElement("input");o.setAttribute("type","datetime-local");var i=document.createElement("button");return i.innerText="add",e.appendChild(n),e.appendChild(o),e.appendChild(i),e.onsubmit=function(e){e.preventDefault(),console.log(o.value),t.TodoApp.addTaskWithTimer(n.value,o.value),t.TodoApp.save(),t.drawTodos()},e},t.prototype.drawForms=function(){var t=this,e=document.getElementById("radio"),n=document.getElementById("addTasks"),o=document.createElement("button");o.innerText="x",o.onclick=function(){n.innerHTML=""},e.onchange=function(e){n.innerHTML="";var i,r=e.target.parentNode.dataset.type;"Task"===r?i=t.drawFormForTask():"TaskWithSubtasks"===r?i=t.drawFormForTaskWithSubTasks():"TaskWithTimer"===r&&(i=t.drawFormForTaskWithTimer()),n.appendChild(i),n.appendChild(o)}},t.prototype.deleteFinished=function(){var t=this;document.getElementById("deleteFinished").onclick=function(){t.TodoApp.deleteFinished(),t.TodoApp.save(),t.todos=t.TodoApp.todos,t.drawTodos()}},t}();e.default=d},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(0)),r=o(n(1)),a=o(n(2)),s=function(){function t(){this.todos=[],this.load()}return t.prototype.addTask=function(t){void 0===t&&(t="");var e=new i.default(t);return this.todos.push(e),e},t.prototype.addTaskWithSubTasks=function(t){void 0===t&&(t="");var e=new a.default(t);return this.todos.push(e),e},t.prototype.addSubTask=function(t,e){var n;return void 0===e&&(e=""),this.todos.forEach(function(o){+o.id==+t&&o instanceof a.default&&(n=o.addSubTask(e))}),n||console.warn("not found task with id:"+t)},t.prototype.addTaskWithTimer=function(t,e){void 0===t&&(t="");var n=new r.default(t,e);return this.todos.push(n),n},t.prototype.remove=function(t){this.todos=this.todos.filter(function(e){return e instanceof a.default&&e.remove(t),e.id!==+t})},t.prototype.finishById=function(t){this.todos=this.todos.map(function(e){return+e.id==+t?e.finished=!e.finished:e instanceof a.default&&e.finishById(t),e})},t.prototype.deleteFinished=function(){this.todos=this.todos.filter(function(t){return t instanceof a.default&&t.deleteFinished(),!t.finished})},t.prototype.search=function(t){var e=[];return this.todos.forEach(function(n){n.task.toLowerCase().indexOf(t.toLowerCase())+1&&e.push(n),n instanceof a.default&&(e=e.concat(n.search(t)))}),e},t.prototype.save=function(){var t=this.todos.map(function(t){var e={task:t.task,finished:t.finished,type:"",finalTime:null,subTasks:[]};return t instanceof r.default?(e.type="TaskWithTimer",e.finalTime=+t.finalTime):t instanceof a.default?(e.type="TaskWithSubTasks",e.subTasks=t.subTasks.map(function(t){return{task:t.task,finished:t.finished}})):e.type="Task",e});localStorage.data="",localStorage.data=JSON.stringify({todos:t})},t.prototype.load=function(){var t=this;if(localStorage.data){var e=JSON.parse(localStorage.data).todos;this.todos=e.map(function(e){if("Task"===e.type){var n=t.addTask(e.task);return n.finished=e.finished,n}if("TaskWithSubTasks"===e.type){var o=t.addTaskWithSubTasks(e.task);return o.finished=e.finished,e.subTasks.forEach(function(t){o.addSubTask(t.task).finished=t.finished}),o}if("TaskWithTimer"===e.type){var i=t.addTaskWithTimer(e.task,e.finalTime);return i.finished=e.finished,i}})}},t}();e.default=s}]);
//# sourceMappingURL=main.js.map